<!DOCTYPE html>
<html lang="en">
<head>
┬а <meta charset="UTF-8" />
┬а <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
┬а <meta name="theme-color" content="#0055aa" />
┬а <meta name="description" content="NAPT Word Game (Site2 Test)" />
┬а <title>NAPT Word Game (Site2)</title>

    <script>
        // --- Fallback Mechanism for Original Site ---
        // This is the URL where your Site2 PWA is *actually hosted*.
        // If Site2 is hosted at https://your-domain.com/Site2/, use that.
        // If Site2 is meant to be a completely separate domain, use that (e.g., https://naptpwabackup.com/).
        const fallbackSiteUrl = "https://your-domain.com/Site2/"; // **IMPORTANT: Update this with the real URL of Site2**
        const criticalResourceLoadDelayMs = 4000; // Time to wait for critical resources to load (4 seconds)

        let initialLoadCompleted = false;
        let errorsDetected = 0;
        const errorThreshold = 2; // Number of errors before triggering redirect

        window.onerror = function(message, source, lineno, colno, error) {
            errorsDetected++;
            console.error("Critical JS Error on original site:", message, source, lineno);
            if (errorsDetected >= errorThreshold) {
                console.warn("Too many JS errors. Redirecting to fallback site:", fallbackSiteUrl);
                window.location.replace(fallbackSiteUrl);
            }
            return true; // Prevent default browser error reporting
        };

        document.addEventListener('DOMContentLoaded', () => {
            initialLoadCompleted = true;
            console.log("Original site DOMContentLoaded.");
        });

        setTimeout(() => {
            if (!initialLoadCompleted || errorsDetected > 0) {
                console.warn("Original site did not load fully or encountered errors. Initiating fallback.");
                window.location.replace(fallbackSiteUrl);
            } else {
                console.info("Original site loaded successfully with no critical errors detected.");
            }
        }, criticalResourceLoadDelayMs);
    </script>
    ┬а ┬а <script>
┬а ┬а const root = document.documentElement;
┬а ┬а const font = localStorage.getItem('napt-font');
┬а ┬а const theme = localStorage.getItem('napt-theme');
┬а ┬а const contrast = localStorage.getItem('napt-contrast');
┬а ┬а const useEmojis = localStorage.getItem('napt-use-emojis');

┬а ┬а if (font) root.classList.add(`font-${font}`);
┬а ┬а if (theme === 'light' || theme === 'dark') root.classList.add(`theme-${theme}`);
┬а ┬а if (contrast === 'true') root.classList.add('theme-high-contrast');
┬а ┬а if (useEmojis === 'false') root.classList.add('no-emojis');
┬а </script>

┬а <link href="https://fonts.googleapis.com/css2?family=Domine&family=Lora&family=Merriweather&family=Tinos&display=swap" rel="stylesheet">

  ┬а <link rel="manifest" href="manifest.json" />
┬а <link rel="stylesheet" href="styles/main.css" />
┬а <link rel="icon" href="icons/icon-192.png" type="image/png" />
  ┬а <script src="scripts/serviceWorkerRegistration.js"></script>
  </head>

<body>
┬а <header>
┬а ┬а <h1>NAPT Word Game РђЊ Site2 Test</h1>
┬а ┬а <p>This version uses <code>/Site2/scripts/</code> as the source.</p>
┬а </header>

┬а <main id="menu" class="active">
┬а ┬а <div id="mode-buttons" class="mode-buttons">
┬а ┬а ┬а <button class="menu-btn" data-mode="regular">­ЪДа Solo Mode</button>
┬а ┬а ┬а <button class="menu-btn" data-mode="wordRelic">­ЪЈ║ Word Relic</button>
┬а ┬а ┬а <button class="menu-btn" data-mode="wordSafari">­ЪдЂ Word Safari</button>
┬а ┬а ┬а <button class="menu-btn" data-mode="dice">­Ъј▓ Dice Challenge</button>
┬а ┬а ┬а <button class="menu-btn" data-mode="atlas">­ЪЌ║№ИЈ Word Atlas</button>
┬а ┬а ┬а <button class="menu-btn" data-mode="versus">­Ъцќ Play vs Computer</button>
┬а ┬а ┬а <button class="menu-btn" data-mode="trail">­Ъфё Trail of Letters</button>
┬а ┬а ┬а <button class="menu-btn" data-mode="nearby">­ЪЊЇ Play Nearby</button>
┬а ┬а </div>

┬а ┬а <details id="settings-panel" style="padding: 1rem; max-width: 800px; margin: auto;">
┬а ┬а ┬а <summary><strong>РџЎ№ИЈ Settings</strong></summary>
┬а ┬а ┬а <div style="margin-top: 1rem;">
┬а ┬а ┬а ┬а <label for="fontSelector">Font:</label><br/>
┬а ┬а ┬а ┬а <select id="fontSelector">
┬а ┬а ┬а ┬а ┬а <option value="">System Default</option>
┬а ┬а ┬а ┬а ┬а <option value="domine">Domine</option>
┬а ┬а ┬а ┬а ┬а <option value="merriweather">Merriweather</option>
┬а ┬а ┬а ┬а ┬а <option value="lora">Lora</option>
┬а ┬а ┬а ┬а ┬а <option value="tinos">Tinos</option>
┬а ┬а ┬а ┬а </select><br/>

┬а ┬а ┬а ┬а <label for="themeSelector">Theme:</label><br/>
┬а ┬а ┬а ┬а <select id="themeSelector">
┬а ┬а ┬а ┬а ┬а <option value="system">System Default</option>
┬а ┬а ┬а ┬а ┬а <option value="light">Light</option>
┬а ┬а ┬а ┬а ┬а <option value="dark">Dark</option>
┬а ┬а ┬а ┬а </select><br/>

┬а ┬а ┬а ┬а <label><input type="checkbox" id="highContrastToggle" /> High Contrast Mode</label><br/>
┬а ┬а ┬а ┬а <label><input type="checkbox" id="emojiToggle" /> Show Emojis in Game Labels</label><br/>
┬а ┬а ┬а ┬а <label><input type="checkbox" id="resumeToggle" /> Resume Last Game on Load</label><br/>

┬а ┬а ┬а ┬а <label for="difficultySelector">Difficulty:</label><br/>
┬а ┬а ┬а ┬а <select id="difficultySelector">
┬а ┬а ┬а ┬а ┬а <option value="easy" selected>Easy</option>
┬а ┬а ┬а ┬а ┬а <option value="medium">Medium</option>
┬а ┬а ┬а ┬а ┬а <option value="hard">Hard</option>
┬а ┬а ┬а ┬а </select><br/>

┬а ┬а ┬а ┬а <label for="radiusSelector">Map Radius:</label><br/>
┬а ┬а ┬а ┬а <select id="radiusSelector">
┬а ┬а ┬а ┬а ┬а <option value="3">3 km</option>
┬а ┬а ┬а ┬а ┬а <option value="10" selected>10 km</option>
┬а ┬а ┬а ┬а ┬а <option value="50">50 km</option>
┬а ┬а ┬а ┬а ┬а <option value="200">200 km</option>
┬а ┬а ┬а ┬а </select>
┬а ┬а ┬а </div>
┬а ┬а </details>
┬а </main>

┬а <div id="game" class="game-container"></div>

┬а <div id="error-viewer-link" style="text-align:center; margin-top:1rem;">
    ┬а ┬а <a href="scripts/utils/error-log.html" target="_blank" style="font-size: 0.9rem;">­Ъљъ View Error Log</a>
┬а </div>

┬а ┬а <script type="module">
┬а ┬а // This path is correct IF Site2 is a subfolder at the web root
┬а ┬а const site2 = './Site2/scripts/';
┬а ┬а await import(site2 + 'main.js'); // This will load Site2/scripts/main.js
┬а ┬а await import(site2 + 'gameNavigation.js'); // This will load Site2/scripts/gameNavigation.js
┬а </script>

  </body>
</html>
